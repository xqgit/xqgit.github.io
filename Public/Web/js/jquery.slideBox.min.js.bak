(function($){$.fn.slideBox=function(options){var defaults={direction'left',duration0.6,easing'swing',delay3,startIndex0,hideClickBartrue,clickBarRadius5,hideBottomBarfalse,widthnull,heightnull};var settings=$.extend(defaults,options{});var wrapper=$(this),ul=wrapper.children('ul.items'),lis=ul.find('li'),firstPic=lis.first().find('img');var li_num=lis.size(),li_height=0,li_width=0;var order_by='ASC';var init=function(){if(!wrapper.size())return false;li_height=settings.heightsettings.heightlis.first().height();li_width=settings.widthsettings.widthlis.first().width();wrapper.css({});lis.css({widthli_width+'px',heightli_height+'px'});if(settings.direction=='left'){ul.css('width')}else{ul.css('height',li_numli_height+'px')};ul.find('lieq('+settings.startIndex+')').addClass('active');if(!settings.hideBottomBar){var tips=$('div class=tipsdiv').css('opacity',1).appendTo(wrapper);var title=$('div class=titlediv').html(function(){var active=ul.find('li.active').find('a'),text=active.attr('title'),href=active.attr('href');return $('a').attr('href',href).text(text)}).appendTo(tips);var nums=$('div class=numsdiv').hide().appendTo(tips);lis.each(function(i,n){var a=$(n).find('a'),text=a.attr('title'),href=a.attr('href'),css='';i==settings.startIndex&&(css='active');$('a').attr('href',href).text(text).addClass(css).css('borderRadius',settings.clickBarRadius+'px').mouseover(function(){$(this).addClass('active').siblings().removeClass('active');ul.find('lieq('+$(this).index()+')').addClass('active').siblings().removeClass('active');start();stop()}).appendTo(nums)});if(settings.hideClickBar){tips.hover(function(){nums.animate({top'0px'},'fast')},function(){nums.animate({toptips.height()+'px'},'fast')});nums.show().delay(2000).animate({toptips.height()+'px'},'fast')}else{nums.show()}};lis.size()1&&start()};var start=function(){var active=ul.find('li.active'),active_a=active.find('a');var index=active.index();if(settings.direction=='left'){offset=indexli_width-1;param={'left'offset+'px'}}else{offset=indexli_height-1;param={'top'offset+'px'}};wrapper.find('.nums').find('aeq('+index+')').addClass('active').siblings().removeClass('active');wrapper.find('.title').find('a').attr('href',active_a.attr('href')).text(active_a.attr('title'));ul.stop().animate(param,settings.duration1000,settings.easing,function(){active.removeClass('active');if(order_by=='ASC'){if(active.next().size()){active.next().addClass('active')}else{order_by='DESC';active.prev().addClass('active')}}else if(order_by=='DESC'){if(active.prev().size()){active.prev().addClass('active')}else{order_by='ASC';active.next().addClass('active')}}});wrapper.data('timeid',window.setTimeout(start,settings.delay1000))};var stop=function(){window.clearTimeout(wrapper.data('timeid'))};wrapper.hover(function(){stop()},function(){window.setTimeout(start,settings.delay1000);});var imgLoader=new Image();imgLoader.onload=function(){imgLoader.onload=null;init()};imgLoader.src=firstPic.attr('src')}})(jQuery);